const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient();

async function main() {
  console.log('ğŸ”„ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ä¸­...');

  // ğŸš¨ğŸš¨ğŸš¨ ã€é‡è¦è­¦å‘Šã€‘å…¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Œå…¨å‰Šé™¤å®Ÿè¡Œä¸­ ğŸš¨ğŸš¨ğŸš¨
  console.log('ğŸš¨ğŸš¨ğŸš¨ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Œå…¨ãƒªã‚»ãƒƒãƒˆé–‹å§‹ ğŸš¨ğŸš¨ğŸš¨');
  console.log('ğŸ—‘ï¸  å…¨ã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ï¼ˆ225äººåˆ†å«ã‚€ï¼‰ã‚’å®Œå…¨å‰Šé™¤ã—ã¾ã™');
  console.log('ğŸ—‘ï¸  å…¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»å¥‘ç´„ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨å‰Šé™¤ã—ã¾ã™');
  console.log('âš ï¸  ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ï¼');
  await prisma.adjustment.deleteMany();
  await prisma.contract.deleteMany();
  await prisma.contractDisplayCache.deleteMany(); // å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„å¯¾å¿œ
  await prisma.temporaryAssignment.deleteMany();
  await prisma.dailyAssignment.deleteMany();
  await prisma.departmentSettings.deleteMany();
  await prisma.staff.deleteMany();
  console.log('âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Œå…¨å‰Šé™¤å®Œäº†');

  // ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç”¨ã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆ50äººï¼‰
  console.log('ã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ä½œæˆä¸­ï¼ˆ50äººç‰ˆï¼‰...');
  
  // éƒ¨ç½²ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—é…ç½®è¨­è¨ˆï¼ˆç¾åœ¨ã®é…è‰²ã¨ã®çµ±ä¸€æ„Ÿé‡è¦–ï¼‰
  const DEPARTMENT_GROUPS = [
    {
      dept: 'ã‚·ã‚¹ãƒ†ãƒ éƒ¨',
      groups: [
        { name: 'é–‹ç™ºã‚°ãƒ«ãƒ¼ãƒ—', positions: ['ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', 'ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', 'ãƒªãƒ¼ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', 'ä¸»ä»»'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] },
        { name: 'é‹ç”¨ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['é‹ç”¨æ‹…å½“', 'é‹ç”¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', 'ä¸»ä»»'], arrangements: ['å‡ºç¤¾', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] },
        { name: 'ã‚¤ãƒ³ãƒ•ãƒ©ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ‹…å½“', 'ä¿‚é•·'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ'] }
      ]
    },
    {
      dept: 'å–¶æ¥­éƒ¨',
      groups: [
        { name: 'å–¶æ¥­ä¸€èª²', positions: ['å–¶æ¥­æ‹…å½“', 'å–¶æ¥­ä¸»ä»»', 'ä¿‚é•·'], arrangements: ['å‡ºç¤¾', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] },
        { name: 'å–¶æ¥­äºŒèª²', positions: ['å–¶æ¥­æ‹…å½“', 'ä¸»ä»»', 'å–¶æ¥­ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼'], arrangements: ['å‡ºç¤¾', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] },
        { name: 'å–¶æ¥­ä¼ç”»', positions: ['ä¼ç”»æ‹…å½“', 'ä¼ç”»ä¸»ä»»', 'èª²é•·'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ'] }
      ]
    },
    {
      dept: 'çµŒç†éƒ¨',
      groups: [
        { name: 'ä¼šè¨ˆã‚°ãƒ«ãƒ¼ãƒ—', positions: ['ä¼šè¨ˆå£«', 'ä¼šè¨ˆæ‹…å½“', 'ä¸»ä»»'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ'] },
        { name: 'è²¡å‹™ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['è²¡å‹™æ‹…å½“', 'è²¡å‹™ã‚¢ãƒŠãƒªã‚¹ãƒˆ', 'èª²é•·'], arrangements: ['å‡ºç¤¾', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] }
      ]
    },
    {
      dept: 'äººäº‹éƒ¨',
      groups: [
        { name: 'æ¡ç”¨ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['æ¡ç”¨æ‹…å½“', 'æ¡ç”¨ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ã‚¿ãƒ¼', 'ä¸»ä»»'], arrangements: ['å‡ºç¤¾', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] },
        { name: 'åŠ´å‹™ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['åŠ´å‹™æ‹…å½“', 'åŠ´å‹™ä¸»ä»»', 'ä¿‚é•·'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ'] }
      ]
    },
    {
      dept: 'ç·å‹™éƒ¨',
      groups: [
        { name: 'ç·å‹™ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['ç·å‹™æ‹…å½“', 'ç·å‹™ä¸»ä»»'], arrangements: ['å‡ºç¤¾'] },
        { name: 'æ³•å‹™ã‚°ãƒ«ãƒ¼ãƒ—', positions: ['æ³•å‹™æ‹…å½“', 'æ³•å‹™ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ'] }
      ]
    },
    {
      dept: 'ä¼ç”»éƒ¨',
      groups: [
        { name: 'äº‹æ¥­ä¼ç”»', positions: ['ä¼ç”»æ‹…å½“', 'äº‹æ¥­ä¼ç”»ä¸»ä»»'], arrangements: ['å‡ºç¤¾', 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰'] },
        { name: 'æˆ¦ç•¥ä¼ç”»', positions: ['æˆ¦ç•¥ä¼ç”»æ‹…å½“', 'æˆ¦ç•¥ã‚¢ãƒŠãƒªã‚¹ãƒˆ'], arrangements: ['å‡ºç¤¾', 'ãƒªãƒ¢ãƒ¼ãƒˆ'] }
      ]
    }
  ];

  // æ—¥æœ¬ã®å§“åãƒªã‚¹ãƒˆï¼ˆ50äººåˆ†ï¼‰
  const SURNAMES = ['ç”°ä¸­', 'ä½è—¤', 'å±±ç”°', 'éˆ´æœ¨', 'é«˜æ©‹', 'æ¸¡è¾º', 'ä¸­æ‘', 'å°æ—', 'åŠ è—¤', 'å‰ç”°',
                   'å±±æœ¬', 'æ¾æœ¬', 'äº•ä¸Š', 'æœ¨æ‘', 'æ—', 'æ¸…æ°´', 'å±±å£', 'æ£®', 'æ± ç”°', 'æ©‹æœ¬',
                   'çŸ³å·', 'å‰ç”°', 'è—¤ç”°', 'å¾Œè—¤', 'å²¡ç”°', 'é•·è°·å·', 'æ‘ä¸Š', 'è¿‘è—¤', 'çŸ³äº•', 'æ–è—¤',
                   'å‚æœ¬', 'é è—¤', 'é’æœ¨', 'è—¤äº•', 'è¥¿æ‘', 'ç¦ç”°', 'å¤ªç”°', 'ä¸‰æµ¦', 'è—¤åŸ', 'å²¡æœ¬',
                   'æ¾ç”°', 'ä¸­å³¶', 'é‡‘å­', 'ä¸Šç”°', 'åŸç”°', 'å’Œç”°', 'æ­¦ç”°', 'æ‘ç”°', 'ç«¹å†…', 'æŸ´ç”°'];
  const GIVEN_NAMES_M = ['å¤ªéƒ', 'æ¬¡éƒ', 'å¥å¤ª', 'æ…ä¹Ÿ', 'é›„ä¸€', 'å¤§è¼”', 'ç›´æ¨¹', 'è‹±é›„', 'æ­£æ¨¹', 'åšå²',
                        'ç§€æ¨¹', 'å’Œä¹Ÿ', 'å­¦', 'èª ', 'è¡', 'æµ©', 'ä¿®', 'éš†', 'å‹‡', 'è±Š', 'é€²', 'å¾¹', 'å®Ÿ', 'ç™»', 'æ˜‡'];
  const GIVEN_NAMES_F = ['èŠ±å­', 'ç¾å’²', 'é›…å­', 'çŸ¥ç¾', 'ç”±ç¾', 'çœŸç†', 'æµå­', 'æ™ºå­', 'ç¾ç©‚', 'é¦™ç¹”',
                        'ç†æµ', 'è£•å­', 'å„ªå­', 'ç¶¾å­', 'éº»è¡£', 'ç¾æ¨¹', 'ç›´ç¾', 'åƒæ˜¥', 'æ„›', 'èˆ', 'ç³', 'èŒ', 'æ¡œ', 'å½©', 'è‘µ'];

  // 50äººã®ã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
  const staffData = [];
  let empNoCounter = 1001;
  let nameIndex = 0;
  
  for (const deptConfig of DEPARTMENT_GROUPS) {
    for (const groupConfig of deptConfig.groups) {
      // å„ã‚°ãƒ«ãƒ¼ãƒ—ã«5-9äººã‚’é…ç½®
      const groupSize = Math.floor(Math.random() * 5) + 5; // 5-9äºº
      
      for (let i = 0; i < groupSize && nameIndex < 50; i++) {
        const isManager = Math.random() < 0.15; // 15%ãŒç®¡ç†è·
        const gender = Math.random() < 0.6 ? 'M' : 'F'; // 60%ç”·æ€§ã€40%å¥³æ€§
        const surname = SURNAMES[nameIndex];
        const givenName = gender === 'M' ? 
          GIVEN_NAMES_M[Math.floor(Math.random() * GIVEN_NAMES_M.length)] :
          GIVEN_NAMES_F[Math.floor(Math.random() * GIVEN_NAMES_F.length)];
        
        const position = isManager ? 
          (Math.random() < 0.5 ? 'èª²é•·' : 'ä¿‚é•·') :
          groupConfig.positions[Math.floor(Math.random() * groupConfig.positions.length)];
        
        const workArrangement = groupConfig.arrangements[Math.floor(Math.random() * groupConfig.arrangements.length)];
        
        staffData.push({
          empNo: empNoCounter.toString().padStart(4, '0'),
          name: surname + givenName,
          department: deptConfig.dept,
          group: groupConfig.name,
          position: position,
          workArrangement: workArrangement,
          isManager: isManager
        });
        
        empNoCounter++;
        nameIndex++;
      }
    }
  }

  const createdStaff = [];
  for (const staff of staffData) {
    const createdRecord = await prisma.staff.create({
      data: staff
    });
    createdStaff.push(createdRecord);
  }

  // éƒ¨ç½²è¨­å®šä½œæˆï¼ˆçµ±ä¸€æ„Ÿã®ã‚ã‚‹é…è‰²ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰
  console.log('éƒ¨ç½²è¨­å®šä½œæˆä¸­ï¼ˆçµ±ä¸€é…è‰²ç‰ˆï¼‰...');
  const departmentSettings = [
    // éƒ¨ç½²: ãƒ™ãƒ¼ã‚¹è‰²ï¼ˆç¾åœ¨ã®é…è‰²ã‚’è¸è¥²ï¼‰
    { type: 'department', name: 'ã‚·ã‚¹ãƒ†ãƒ éƒ¨', backgroundColor: '#8BB5F7', displayOrder: 10 },    // æ·¡ã„é’ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'department', name: 'å–¶æ¥­éƒ¨', backgroundColor: '#7DDDB5', displayOrder: 20 },        // æ·¡ã„ç·‘ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'department', name: 'çµŒç†éƒ¨', backgroundColor: '#F7C574', displayOrder: 30 },        // æ·¡ã„é‡‘ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'department', name: 'äººäº‹éƒ¨', backgroundColor: '#F79999', displayOrder: 40 },        // æ·¡ã„èµ¤ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'department', name: 'ç·å‹™éƒ¨', backgroundColor: '#D4A5F7', displayOrder: 50 },        // æ·¡ã„ç´«
    { type: 'department', name: 'ä¼ç”»éƒ¨', backgroundColor: '#A5E6D4', displayOrder: 60 },        // æ·¡ã„ã‚¿ãƒ¼ã‚³ã‚¤ã‚º
    
    // ã‚°ãƒ«ãƒ¼ãƒ—: éƒ¨ç½²è‰²ã¨ã®çµ±ä¸€æ„Ÿã‚’é‡è¦–ã—ãŸåŒç³»çµ±è‰²
    // ã‚·ã‚¹ãƒ†ãƒ éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆé’ç³»çµ±ï¼‰
    { type: 'group', name: 'é–‹ç™ºã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#C4B5F7', displayOrder: 10 },      // æ·¡ã„ç´«ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'group', name: 'é‹ç”¨ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#7DD3F0', displayOrder: 20 },      // æ·¡ã„æ°´è‰²ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'group', name: 'ã‚¤ãƒ³ãƒ•ãƒ©ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#A5C9F7', displayOrder: 30 },  // é’ç³»çµ±
    
    // å–¶æ¥­éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆç·‘ç³»çµ±ï¼‰
    { type: 'group', name: 'å–¶æ¥­ä¸€èª²', backgroundColor: '#B8E673', displayOrder: 10 },          // æ·¡ã„é»„ç·‘ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'group', name: 'å–¶æ¥­äºŒèª²', backgroundColor: '#99E6B3', displayOrder: 20 },          // æ·¡ã„è–„ç·‘ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'group', name: 'å–¶æ¥­ä¼ç”»', backgroundColor: '#85D4A5', displayOrder: 30 },          // ç·‘ç³»çµ±
    
    // çµŒç†éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ãƒ»ã‚¤ã‚¨ãƒ­ãƒ¼ç³»çµ±ï¼‰
    { type: 'group', name: 'ä¼šè¨ˆã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#F7B574', displayOrder: 10 },      // æ·¡ã„ã‚ªãƒ¬ãƒ³ã‚¸ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'group', name: 'è²¡å‹™ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#E6D973', displayOrder: 20 },      // æ·¡ã„ãƒ™ãƒ¼ã‚¸ãƒ¥ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    
    // äººäº‹éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆãƒ”ãƒ³ã‚¯ãƒ»ãƒ­ãƒ¼ã‚ºç³»çµ±ï¼‰
    { type: 'group', name: 'æ¡ç”¨ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#F7B5E6', displayOrder: 10 },      // æ·¡ã„ãƒ”ãƒ³ã‚¯ï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    { type: 'group', name: 'åŠ´å‹™ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#E6B5CC', displayOrder: 20 },      // æ·¡ã„ãƒ­ãƒ¼ã‚ºï¼ˆç¾åœ¨ã¨åŒã˜ï¼‰
    
    // ç·å‹™éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆç´«ç³»çµ±ï¼‰
    { type: 'group', name: 'ç·å‹™ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#E6C4F7', displayOrder: 10 },      // æ·¡ã„è–„ç´«
    { type: 'group', name: 'æ³•å‹™ã‚°ãƒ«ãƒ¼ãƒ—', backgroundColor: '#D4B5E6', displayOrder: 20 },      // ç´«ç³»çµ±
    
    // ä¼ç”»éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆã‚¿ãƒ¼ã‚³ã‚¤ã‚ºç³»çµ±ï¼‰
    { type: 'group', name: 'äº‹æ¥­ä¼ç”»', backgroundColor: '#B8E6D4', displayOrder: 10 },          // æ·¡ã„ã‚¿ãƒ¼ã‚³ã‚¤ã‚º
    { type: 'group', name: 'æˆ¦ç•¥ä¼ç”»', backgroundColor: '#99D4C4', displayOrder: 20 },          // ã‚¿ãƒ¼ã‚³ã‚¤ã‚ºç³»çµ±
  ];

  for (const setting of departmentSettings) {
    await prisma.departmentSettings.create({
      data: setting
    });
  }

  // å¥‘ç´„ãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆåŸºæœ¬å‹¤å‹™æ™‚é–“ï¼‰
  console.log('å¥‘ç´„ãƒ‡ãƒ¼ã‚¿ä½œæˆä¸­...');
  const contractData = [
    {
      empNo: "1001", name: "ç”°ä¸­å¤ªéƒ", dept: "ã‚·ã‚¹ãƒ†ãƒ éƒ¨", team: "é–‹ç™ºã‚°ãƒ«ãƒ¼ãƒ—", email: "tanaka@company.com",
      mondayHours: "09:00-18:00", tuesdayHours: "09:00-18:00", wednesdayHours: "09:00-18:00",
      thursdayHours: "09:00-18:00", fridayHours: "09:00-18:00", staffId: createdStaff[0].id
    },
    {
      empNo: "1002", name: "ä½è—¤èŠ±å­", dept: "ã‚·ã‚¹ãƒ†ãƒ éƒ¨", team: "é‹ç”¨ã‚°ãƒ«ãƒ¼ãƒ—", email: "sato@company.com",
      mondayHours: "10:00-19:00", tuesdayHours: "10:00-19:00", wednesdayHours: "10:00-19:00",
      thursdayHours: "10:00-19:00", fridayHours: "10:00-19:00", staffId: createdStaff[1].id
    },
    {
      empNo: "1003", name: "å±±ç”°æ¬¡éƒ", dept: "å–¶æ¥­éƒ¨", team: "å–¶æ¥­ä¸€èª²", email: "yamada@company.com",
      mondayHours: "08:30-17:30", tuesdayHours: "08:30-17:30", wednesdayHours: "08:30-17:30",
      thursdayHours: "08:30-17:30", fridayHours: "08:30-17:30", staffId: createdStaff[2].id
    },
    {
      empNo: "1004", name: "éˆ´æœ¨ç¾å’²", dept: "å–¶æ¥­éƒ¨", team: "å–¶æ¥­äºŒèª²", email: "suzuki@company.com",
      mondayHours: "09:00-18:00", tuesdayHours: "09:00-18:00", wednesdayHours: "09:00-18:00",
      thursdayHours: "09:00-18:00", fridayHours: "09:00-18:00", staffId: createdStaff[3].id
    },
    {
      empNo: "1005", name: "é«˜æ©‹å¥å¤ª", dept: "çµŒç†éƒ¨", team: "ä¼šè¨ˆã‚°ãƒ«ãƒ¼ãƒ—", email: "takahashi@company.com",
      mondayHours: "09:30-18:30", tuesdayHours: "09:30-18:30", wednesdayHours: "09:30-18:30",
      thursdayHours: "09:30-18:30", fridayHours: "09:30-18:30", staffId: createdStaff[4].id
    },
    {
      empNo: "1006", name: "æ¸¡è¾ºé›…å­", dept: "çµŒç†éƒ¨", team: "è²¡å‹™ã‚°ãƒ«ãƒ¼ãƒ—", email: "watanabe@company.com",
      mondayHours: "08:00-17:00", tuesdayHours: "08:00-17:00", wednesdayHours: "08:00-17:00",
      thursdayHours: "08:00-17:00", fridayHours: "08:00-17:00", staffId: createdStaff[5].id
    },
    {
      empNo: "1007", name: "ä¸­æ‘æ…ä¹Ÿ", dept: "äººäº‹éƒ¨", team: "æ¡ç”¨ã‚°ãƒ«ãƒ¼ãƒ—", email: "nakamura@company.com",
      mondayHours: "09:00-18:00", tuesdayHours: "09:00-18:00", wednesdayHours: "09:00-18:00",
      thursdayHours: "09:00-18:00", fridayHours: "09:00-18:00", staffId: createdStaff[6].id
    },
    {
      empNo: "1008", name: "å°æ—çŸ¥ç¾", dept: "äººäº‹éƒ¨", team: "åŠ´å‹™ã‚°ãƒ«ãƒ¼ãƒ—", email: "kobayashi@company.com",
      mondayHours: "10:00-19:00", tuesdayHours: "10:00-19:00", wednesdayHours: "10:00-19:00",
      thursdayHours: "10:00-19:00", fridayHours: "10:00-19:00", staffId: createdStaff[7].id
    },
  ];

  for (const contract of contractData) {
    await prisma.contract.create({
      data: contract
    });
  }

  // èª¿æ•´ãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆå€‹åˆ¥ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ - ä»Šæ—¥ã®æ—¥ä»˜ã§ä½œæˆï¼ˆJSTåŸºæº–ï¼‰
  console.log('èª¿æ•´ãƒ‡ãƒ¼ã‚¿ä½œæˆä¸­...');
  const today = new Date();
  const jstToday = new Date(today.getTime() + 9 * 60 * 60 * 1000); // JSTå¤‰æ›
  const todayStr = jstToday.toISOString().split('T')[0];
  console.log(`ğŸ“… ãƒ‡ãƒ¼ã‚¿ä½œæˆæ—¥ä»˜: ${todayStr} (JSTåŸºæº–)`);
  
  // UTCæ™‚åˆ»ã§ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆï¼ˆJSTåŸºæº–æ™‚é–“ - 9æ™‚é–“ï¼‰
  const adjustmentData = [
    {
      date: new Date(todayStr),
      status: 'online',
      start: new Date(`${todayStr}T00:00:00Z`), // JST 9:00
      end: new Date(`${todayStr}T09:00:00Z`),   // JST 18:00
      memo: 'é€šå¸¸æ¥­å‹™',
      staffId: createdStaff[0].id
    },
    {
      date: new Date(todayStr),
      status: 'meeting',
      start: new Date(`${todayStr}T01:00:00Z`), // JST 10:00
      end: new Date(`${todayStr}T03:00:00Z`),   // JST 12:00
      memo: 'æœä¼š',
      staffId: createdStaff[0].id
    },
    {
      date: new Date(todayStr),
      status: 'remote',
      start: new Date(`${todayStr}T01:00:00Z`), // JST 10:00
      end: new Date(`${todayStr}T10:00:00Z`),   // JST 19:00
      memo: 'ãƒªãƒ¢ãƒ¼ãƒˆä½œæ¥­',
      staffId: createdStaff[1].id
    },
    {
      date: new Date(todayStr),
      status: 'training',
      start: new Date(`${todayStr}T04:00:00Z`), // JST 13:00
      end: new Date(`${todayStr}T06:00:00Z`),   // JST 15:00
      memo: 'æŠ€è¡“ç ”ä¿®',
      staffId: createdStaff[1].id
    },
    {
      date: new Date(todayStr),
      status: 'online',
      start: new Date(`${todayStr}T23:30:00Z`), // JST 8:30 (å‰æ—¥åˆ†ãªã®ã§ +1æ—¥)
      end: new Date(`${todayStr}T08:30:00Z`),   // JST 17:30
      memo: 'å–¶æ¥­æ´»å‹•',
      staffId: createdStaff[2].id
    },
    {
      date: new Date(todayStr),
      status: 'off',
      start: new Date(`${todayStr}T00:00:00Z`), // JST 9:00
      end: new Date(`${todayStr}T09:00:00Z`),   // JST 18:00
      memo: 'æœ‰çµ¦ä¼‘æš‡',
      staffId: createdStaff[3].id
    },
  ];

  for (const adjustment of adjustmentData) {
    await prisma.adjustment.create({
      data: {
        ...adjustment,
        updatedAt: new Date()
      }
    });
  }

  // æ”¯æ´è¨­å®šä½œæˆ
  console.log('æ”¯æ´è¨­å®šä½œæˆä¸­...');
  await prisma.temporaryAssignment.create({
    data: {
      staffId: createdStaff[0].id, // ç”°ä¸­å¤ªéƒ
      startDate: new Date(todayStr),
      endDate: new Date(new Date(todayStr).getTime() + 2 * 24 * 60 * 60 * 1000), // 2æ—¥å¾Œ
      tempDept: "å–¶æ¥­éƒ¨",
      tempGroup: "å–¶æ¥­ä¸€èª²",
      reason: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ”¯æ´",
      updatedAt: new Date()
    }
  });

  // æ‹…å½“è¨­å®šä½œæˆ
  console.log('æ‹…å½“è¨­å®šä½œæˆä¸­...');
  await prisma.dailyAssignment.createMany({
    data: [
      {
        staffId: createdStaff[1].id, // ä½è—¤èŠ±å­
        date: new Date(todayStr),
        assignmentType: 'fax',
        customLabel: null,
        updatedAt: new Date()
      },
      {
        staffId: createdStaff[2].id, // å±±ç”°æ¬¡éƒ
        date: new Date(todayStr),
        assignmentType: 'subjectCheck',
        customLabel: null,
        updatedAt: new Date()
      },
      {
        staffId: createdStaff[3].id, // éˆ´æœ¨ç¾å’²
        date: new Date(todayStr),
        assignmentType: 'custom',
        customLabel: 'æ¥å®¢å¯¾å¿œ',
        updatedAt: new Date()
      }
    ]
  });

  // å¥‘ç´„è¡¨ç¤ºã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”Ÿæˆ
  console.log('å¥‘ç´„è¡¨ç¤ºã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”Ÿæˆä¸­...');
  
  // ç¾åœ¨æ—¥æ™‚ã‹ã‚‰3ãƒ¶æœˆåˆ†ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆ
  const currentDate = new Date();
  const currentYear = currentDate.getFullYear();
  const currentMonth = currentDate.getMonth() + 1;
  
  // 3ãƒ¶æœˆåˆ†ï¼ˆç¾åœ¨æœˆå«ã‚€ï¼‰
  const monthsToGenerate = [
    { year: currentYear, month: currentMonth },
    { year: currentMonth === 12 ? currentYear + 1 : currentYear, month: currentMonth === 12 ? 1 : currentMonth + 1 },
    { year: currentMonth >= 11 ? currentYear + 1 : currentYear, month: currentMonth >= 11 ? currentMonth - 10 : currentMonth + 2 }
  ];
  
  const cacheEntries = [];
  
  for (const { year, month } of monthsToGenerate) {
    // ãã®æœˆã®æ—¥æ•°ã‚’å–å¾—
    const daysInMonth = new Date(year, month, 0).getDate();
    
    for (const staff of createdStaff) {
      // ã‚¹ã‚¿ãƒƒãƒ•ã®å¥‘ç´„ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
      const contract = await prisma.contract.findFirst({
        where: { staffId: staff.id }
      });
      
      if (contract) {
        // å„æ—¥ã«ã¤ã„ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¨ãƒ³ãƒˆãƒªã‚’ç”Ÿæˆ
        for (let day = 1; day <= daysInMonth; day++) {
          const date = new Date(year, month - 1, day);
          const dayOfWeek = date.getDay(); // 0=æ—¥æ›œæ—¥, 1=æœˆæ›œæ—¥, ...
          
          // æ›œæ—¥ã«å¯¾å¿œã™ã‚‹å‹¤å‹™æ™‚é–“ã‚’å–å¾—
          const dayKeys = ['sundayHours', 'mondayHours', 'tuesdayHours', 'wednesdayHours', 'thursdayHours', 'fridayHours', 'saturdayHours'];
          const workHours = contract[dayKeys[dayOfWeek]];
          
          // å‹¤å‹™æ™‚é–“ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
          const hasContract = !!(workHours && workHours !== '' && workHours !== null);
          
          cacheEntries.push({
            staffId: staff.id,
            year: year,
            month: month,
            day: day,
            hasContract: hasContract
          });
        }
      }
    }
  }
  
  // ãƒãƒ«ã‚¯ã‚¤ãƒ³ã‚µãƒ¼ãƒˆ
  if (cacheEntries.length > 0) {
    await prisma.contractDisplayCache.createMany({
      data: cacheEntries,
      skipDuplicates: true
    });
  }
  
  console.log(`âœ… å¥‘ç´„è¡¨ç¤ºã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”Ÿæˆå®Œäº†: ${cacheEntries.length}ä»¶`);

  // æ˜¼ä¼‘ã¿ï¼ˆbreakï¼‰è‡ªå‹•è¿½åŠ 
  console.log('æ˜¼ä¼‘ã¿ï¼ˆbreakï¼‰ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆä¸­...');
  
  const breakEntries = [];
  
  for (const { year, month } of monthsToGenerate) {
    const daysInMonth = new Date(year, month, 0).getDate();
    
    for (const staff of createdStaff) {
      const contract = await prisma.contract.findFirst({
        where: { staffId: staff.id }
      });
      
      if (contract) {
        for (let day = 1; day <= daysInMonth; day++) {
          const date = new Date(year, month - 1, day);
          const dayOfWeek = date.getDay();
          
          // æ›œæ—¥ã«å¯¾å¿œã™ã‚‹å‹¤å‹™æ™‚é–“ã‚’ç¢ºèª
          const dayKeys = ['sundayHours', 'mondayHours', 'tuesdayHours', 'wednesdayHours', 'thursdayHours', 'fridayHours', 'saturdayHours'];
          const workHours = contract[dayKeys[dayOfWeek]];
          
          // å‹¤å‹™æ™‚é–“ãŒã‚ã‚‹æ—¥ã®ã¿æ˜¼ä¼‘ã¿ã‚’è¿½åŠ 
          if (workHours && workHours !== '' && workHours !== null) {
            const dateStr = date.toISOString().split('T')[0];
            
            breakEntries.push({
              staffId: staff.id,
              date: date,
              status: 'break',
              start: new Date(`${dateStr}T03:00:00.000Z`), // JST 12:00 = UTC 03:00
              end: new Date(`${dateStr}T04:00:00.000Z`),   // JST 13:00 = UTC 04:00
              memo: 'æ˜¼ä¼‘ã¿ï¼ˆã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ç”Ÿæˆï¼‰',
              reason: 'ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ',
              isPending: false,
              updatedAt: new Date()
            });
          }
        }
      }
    }
  }
  
  // æ˜¼ä¼‘ã¿ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ«ã‚¯ã‚¤ãƒ³ã‚µãƒ¼ãƒˆ
  if (breakEntries.length > 0) {
    await prisma.adjustment.createMany({
      data: breakEntries,
      skipDuplicates: true
    });
  }
  
  console.log(`âœ… æ˜¼ä¼‘ã¿ï¼ˆbreakï¼‰ç”Ÿæˆå®Œäº†: ${breakEntries.length}ä»¶`);

  console.log('âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™å®Œäº†');
  console.log(`ä½œæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿:`);
  console.log(`- ã‚¹ã‚¿ãƒƒãƒ•: ${createdStaff.length}å`);
  console.log(`- éƒ¨ç½²è¨­å®š: ${departmentSettings.length}ä»¶`);
  console.log(`- å¥‘ç´„ãƒ‡ãƒ¼ã‚¿: ${contractData.length}ä»¶`);
  console.log(`- èª¿æ•´ãƒ‡ãƒ¼ã‚¿: ${adjustmentData.length}ä»¶`);
  console.log(`- æ”¯æ´è¨­å®š: 1ä»¶`);
  console.log(`- æ‹…å½“è¨­å®š: 3ä»¶`);
  console.log(`- å¥‘ç´„è¡¨ç¤ºã‚­ãƒ£ãƒƒã‚·ãƒ¥: ${cacheEntries.length}ä»¶`);
  console.log(`- æ˜¼ä¼‘ã¿ï¼ˆbreakï¼‰: ${breakEntries.length}ä»¶`);
}

main()
  .then(async () => {
    await prisma.$disconnect();
  })
  .catch(async (e) => {
    console.error('ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ä½œæˆã‚¨ãƒ©ãƒ¼:', e);
    await prisma.$disconnect();
    process.exit(1);
  });